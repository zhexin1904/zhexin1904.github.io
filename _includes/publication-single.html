{% include base_path %}

{% if post.id %}
  {% assign title = post.title | markdownify | remove: "<p>" | remove: "</p>" %}
{% else %}
  {% assign title = post.title %}
{% endif %}

<table style="border-collapse: collapse; border: none; margin-bottom: 2em;">
<tr>
<td style="width: 300px; border: none; padding: 0; vertical-align: top;">
  {% if post.image %}
    <img src="/images/publications/{{ post.image }}" width="250px" style="margin-right: 20px; display: block;"/>
  {% endif %}
</td>
<td style="border: none; padding: 0; vertical-align: top;">
<div>
  <h2 style="margin-top: 0px; margin-bottom: 5px; font-size: 18px; line-height: 1.3;">{{ title }}</h2>

  {% assign authors = post.authors | replace_first: 'Zhexin Xu', '<b>Zhexin Xu</b>' %}
  <h3 style="font-weight: normal; margin-top: 5px; margin-bottom: 5px; font-size: 14px; color: #666;">{{ authors }}</h3>
  
  <h3 style="font-weight: normal; margin-top: 3px; margin-bottom: 5px; font-size: 14px; color: #666; font-style: italic;">
    {{ post.venue }}, {{ post.year }}
    {% if post.status == "in review" %}
      (in review)
    {% elsif post.status == "accepted" %}
      (accepted)
    {% elsif post.status == "to appear" %}
      (to appear)
    {% endif %}
  </h3>

  {% if post.awards and post.awards != "N/A" and post.awards != "" %}
    {% assign awards = post.awards | split: ", " %}
    {% for award in awards %}
      <h3 style="color: red; margin-top: 5px; margin-bottom: 5px; font-size: 14px;">
        {{ award }}
      </h3>
    {% endfor %}
  {% endif %}

  <h3 style="margin-top: 10px; margin-bottom: 0px; font-size: 14px;">
    {% if post.links_to_website and post.links_to_website != "" and post.links_to_website != "N/A" %}
      <a style="text-decoration: none;" href="{{ post.links_to_website }}" target="_blank">Website <i class="fa fa-globe"></i></a>&nbsp;&nbsp;&nbsp;
    {% endif %}
    
    {% if post.paperurl and post.paperurl != "" and post.paperurl != "N/A" %}
      <a style="text-decoration: none;" href="{{ post.paperurl }}" target="_blank">Paper <i class="fa fa-file"></i></a>&nbsp;&nbsp;&nbsp;
    {% endif %}
    
    {% if post.arxiv and post.arxiv != "" and post.arxiv != "N/A" %}
      <a style="text-decoration: none;" href="{{ post.arxiv }}" target="_blank">arXiv <i class="fa fa-file"></i></a>&nbsp;&nbsp;&nbsp;
    {% endif %}
    
    {% if post.links_to_code and post.links_to_code != "" and post.links_to_code != "N/A" and post.links_to_code != "To be released soon" %}
      {% if post.links_to_code contains "," %}
        {% assign codes = post.links_to_code | split: ", " %}
        Code: [
        {% for code in codes %}
          {% assign code_info = code | split: ": " %}
          <a style="text-decoration: none;" href="{{ code_info.last }}" target="_blank">{{ code_info.first }} <i class="fa fa-code"></i></a>
          {% if code != codes.last %}
            ,&nbsp;
          {% endif %}
        {% endfor %}
        ]&nbsp;&nbsp;&nbsp;
      {% else %}
        <a style="text-decoration: none;" href="{{ post.links_to_code }}" target="_blank">Code <i class="fa fa-code"></i></a>&nbsp;&nbsp;&nbsp;
      {% endif %}
    {% endif %}

    {% if post.links_to_video and post.links_to_video != "" and post.links_to_video != "N/A" %}
      <a style="text-decoration: none;" href="{{ post.links_to_video }}" target="_blank">Video <i class="fa fa-film"></i></a>&nbsp;&nbsp;&nbsp;
    {% endif %}
  </h3>
</div>
</td>
</tr>
</table>
